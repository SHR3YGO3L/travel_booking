<!-- booking/templates/booking/my_bookings.html -->
{% extends "base.html" %}
{% block content %}
<h2>My Bookings</h2>
<div class="row">
  {% for booking in bookings %}
    <div class="col-md-6 mb-3">
      <div class="card">
        <div class="card-body">
          <h5>{{ booking.travel_option.type }}: {{ booking.travel_option.source }} → {{ booking.travel_option.destination }}</h5>
          <p>Date: {{ booking.travel_option.datetime }}<br>
             Seats: {{ booking.number_of_seats }}<br>
             Total Price: ₹{{ booking.total_price }}<br>
             Status: 
             <span class="badge 
                 {% if booking.status == 'Confirmed' %}bg-success
                 {% elif booking.status == 'Cancelled' %}bg-danger
                 {% else %}bg-secondary
                 {% endif %}
             ">
                 {{ booking.status }}
             </span>
          </p>
          {% if booking.status == "Confirmed" %}
          <form method="post" action="{% url 'cancel_booking' booking.id %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-warning">Cancel Booking</button>
          </form>
          {% endif %}
        </div>
      </div>
    </div>
  {% empty %}
    <div class="col-12"><p>No bookings yet.</p></div>
  {% endfor %}
</div>
{% endblock %}
